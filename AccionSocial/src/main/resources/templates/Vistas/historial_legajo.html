<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historial del Legajo - Acción Social</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        .navbar-brand { font-size: 1.4rem; font-weight: 600; }
        .nav-link { transition: all 0.3s ease; border-radius: 5px; margin: 0 2px; }
        .nav-link:hover { background-color: rgba(255, 255, 255, 0.1); transform: translateY(-1px); }
        .dropdown-menu { border: none; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
        .dropdown-item:hover { background-color: #f8f9fa; padding-left: 1.5rem; }
        .card { border: none; border-radius: 10px; transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important; }
        .btn { border-radius: 6px; transition: all 0.3s ease; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); }
        .table-hover tbody tr { transition: background-color 0.2s ease; }
        .table-hover tbody tr:hover { background-color: rgba(13, 110, 253, 0.05); }
    </style>
</head>
<body class="bg-light">
    <!-- Navigation -->
    <nav th:replace="~{Vistas/menu :: menu}"></nav>
    
<div class="container mt-4">
    <div class="card shadow">
        <div class="card-header bg-secondary text-white">
            <h4 class="m-0">Historial del Legajo</h4>
        </div>
        <div class="card-body">
           
            <div class="alert alert-info mb-4">
                <strong>Legajo:</strong> <span th:text="${legajo.nombre + ' ' + legajo.apellido}"></span> - 
                <strong>DNI:</strong> <span th:text="${legajo.dni}"></span>
            </div>

           
            <div th:if="${historial != null and !historial.isEmpty()}">
                <div class="table-responsive">
                    <table class="table table-bordered table-striped">
                        <thead class="table-dark">
                            <tr>
                                <th>Fecha y Hora</th>
                                <th>Tipo de Evento</th>
                                <th>Descripción</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="h : ${historial}">
                                <td th:text="${#temporals.format(h.fechaHora, 'dd/MM/yyyy HH:mm')}"></td>
                                <td>
                                    <span th:if="${h.tipoEvento == 'LEGAJO_CREADO'}" class="badge bg-primary">
                                        <i class="bi bi-file-earmark-plus me-1"></i>LEGAJO CREADO
                                    </span>
                                    <span th:if="${h.tipoEvento == 'LEGAJO_EDITADO'}" class="badge bg-warning text-dark">
                                        <i class="bi bi-pencil-square me-1"></i>LEGAJO EDITADO
                                    </span>
                                    <span th:if="${h.tipoEvento == 'LEGAJO_ELIMINADO'}" class="badge bg-danger">
                                        <i class="bi bi-trash me-1"></i>LEGAJO ELIMINADO
                                    </span>
                                    <span th:if="${h.tipoEvento == 'BENEFICIO_OTORGADO'}" class="badge bg-success">
                                        <i class="bi bi-gift me-1"></i>BENEFICIO OTORGADO
                                    </span>
                                    <span th:if="${h.tipoEvento == 'DOCUMENTACION_ASIGNADA'}" class="badge bg-info">
                                        <i class="bi bi-file-earmark-check me-1"></i>DOCUMENTACIÓN ASIGNADA
                                    </span>
                                    <span th:if="${h.tipoEvento == 'DOCUMENTACION_ESTADO_CAMBIADO'}" class="badge bg-warning">
                                        <i class="bi bi-arrow-repeat me-1"></i>ESTADO CAMBIADO
                                    </span>
                                    <span th:if="${h.tipoEvento == 'DOCUMENTO_SOLICITADO'}" class="badge bg-warning">
                                        <i class="bi bi-file-earmark-text me-1"></i>DOCUMENTO SOLICITADO
                                    </span>
                                    <span th:if="${h.tipoEvento == 'DOCUMENTO_GUARDADO'}" class="badge bg-info">
                                        <i class="bi bi-file-earmark me-1"></i>DOCUMENTO GUARDADO
                                    </span>
                                    <span th:if="${h.tipoEvento != 'LEGAJO_CREADO' and h.tipoEvento != 'LEGAJO_EDITADO' and h.tipoEvento != 'LEGAJO_ELIMINADO' and h.tipoEvento != 'BENEFICIO_OTORGADO' and h.tipoEvento != 'DOCUMENTACION_ASIGNADA' and h.tipoEvento != 'DOCUMENTACION_ESTADO_CAMBIADO' and h.tipoEvento != 'DOCUMENTO_SOLICITADO' and h.tipoEvento != 'DOCUMENTO_GUARDADO'}" 
                                          class="badge bg-secondary" th:text="${h.tipoEvento}"></span>
                                </td>
                                <td th:utext="${h.descripcion}"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div th:if="${historial == null or historial.isEmpty()}" class="alert alert-warning text-center">
                <p>No hay eventos registrados en el historial.</p>
            </div>

        
            <div class="text-center mt-4">
                <a th:href="@{/detallelegajo/{id}(id=${legajo.id})}" class="btn btn-primary btn-lg me-2">
                    <i class="bi bi-arrow-left me-2"></i>Volver al Detalle
                </a>
                <a th:href="@{/mostrarlista}" class="btn btn-secondary btn-lg">
                    <i class="bi bi-list me-2"></i>Volver a la Lista
                </a>
            </div>
        </div>
    </div>
</div>

    
    <footer th:replace="~{Vistas/menu :: footer}"></footer>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

